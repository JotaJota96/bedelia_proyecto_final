<div class="container">
    <div class="row">
        <mat-card class="col-12  mx-auto my-2 example-card">
            <form [formGroup]="formulario">
                <mat-card-header>
                    <mat-card-title>Ingrese los datos</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div class="row">
                        <div class=" col-12 pl-5 pr-5">
                            <!-- datos de la persona -->
                            <mat-form-field [style.width.%]=100>
                                <input matInput placeholder="Nombre" name="nombre" formControlName="nombre">
                            </mat-form-field>

                            <mat-form-field [style.width.%]=100>
                                <textarea matInput placeholder="Descripcion" name="descripcion"
                                    formControlName="descripcion"></textarea>
                            </mat-form-field>

                            <mat-divider></mat-divider>

                            <form [formGroup]="formularioSede" class="mt-4">
                                <div class="row">
                                    <mat-form-field class="col-12 col-md-9" [style.width.%]=100>
                                        <mat-select placeholder="Lista de sedes" name="sede" formControlName="sede">
                                            <mat-option *ngFor="let sede of listaSedes" [value]="sede">
                                                {{sede.direccion.departamento}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <div class="col-12 col-md-3 m-auto" align="end">
                                        <button mat-raised-button (click)="asignarSedes()"
                                            [disabled]="!formularioSede.valid" color="primary">Agregar
                                            sede</button>
                                    </div>
                                </div>
                                <div class="mb-2">
                                    <mat-chip-list aria-label="Fish selection">
                                        <mat-chip *ngFor="let sede of listaSedeSeleccionada">
                                            {{sede.direccion.departamento}}
                                        </mat-chip>
                                    </mat-chip-list>
                                </div>
                            </form>

                            <form [formGroup]="formularioArea">

                                <div class="row">
                                    <mat-form-field class="col-12 col-md-6" [style.width.%]=100>
                                        <mat-select placeholder="Lista de areas de estudio" name="area"
                                            formControlName="area">
                                            <mat-option *ngFor="let area of listaAreasEstudio" [value]="area">
                                                {{area.area}}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <mat-form-field class="col-12 col-md-3" [style.width.%]=100>
                                        <input matInput placeholder="Creditos" name="creditos"
                                            formControlName="creditos">
                                    </mat-form-field>

                                    <div class="col-12 col-md-3 m-auto" align="end">
                                        <button mat-raised-button (click)="asignarArea()"
                                            [disabled]="!formularioArea.valid" color="primary">Agregar area de
                                            estudio</button>
                                    </div>
                                </div>

                                <div class="mb-2">
                                    <mat-chip-list aria-label="Fish selection">
                                        <mat-chip *ngFor="let area of listaAreaSeleccionada">{{area.area}}
                                            ({{area.creditos}} creditos) </mat-chip>
                                    </mat-chip-list>
                                </div>

                            </form>

                            <mat-divider></mat-divider>

                            <form [formGroup]="formularioCurso" class="mt-4">

                                <p class="my-3">Ingrese los cursos para el semestre {{contadorSemestres}}</p>

                                <div class="row">
                                    <div class="col-12 col-md-5">
                                        <mat-form-field [style.width.%]=100>
                                            <mat-select placeholder="Lista de curso" name="curso"
                                                formControlName="curso">
                                                <mat-option *ngFor="let curso of listaCurso" [value]="curso">
                                                    {{curso.nombre}}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-12 col-md-3">
                                        <mat-form-field [style.width.%]=100>
                                            <mat-select placeholder="Tipo de curso" name="optativo"
                                                formControlName="optativo">
                                                <mat-option value="true">Obligatorio</mat-option>
                                                <mat-option value="false">Optativo</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>

                                    <div class="col-12 col-md-2 m-auto" align="end">
                                        <button  class="mt-2" mat-raised-button (click)="asignarCurso()"
                                            [disabled]="!formularioCurso.valid" color="primary">Agregar
                                            cursos</button>
                                    </div>

                                    <div class="col-12 col-md-2 m-auto" align="end">
                                        <button class="mt-2" mat-raised-button (click)="crearSemestre()"
                                            [disabled]="listaCursoSeleccionados.length == 0" color="primary">Agregar
                                            semestre</button>
                                    </div>
                                </div>

                                <div class="mb-2">
                                    <mat-chip-list aria-label="Fish selection">
                                        <mat-chip *ngFor="let curso of listaCursoSeleccionados">{{curso.nombre}}
                                        </mat-chip>
                                    </mat-chip-list>
                                </div>

                            </form>

                            <div>
                                <mat-card *ngFor="let semestre of listaSemestre" class="mt-5">
                                    <mat-card-header>
                                        <mat-card-title>Semestre {{semestre.clave}}</mat-card-title>
                                    </mat-card-header>
                                    <mat-card-content>
                                        <mat-chip-list aria-label="Fish selection">
                                            <mat-chip (click)="cargarListaPrevia(curso, semestre.clave)"
                                                *ngFor="let curso of semestre.cursos">{{curso.nombre}}</mat-chip>
                                        </mat-chip-list>
                                    </mat-card-content>
                                </mat-card>
                            </div>

                            <br>

                            <mat-divider></mat-divider>
                        </div>
                    </div>

                </mat-card-content>
                <mat-card-actions align="end" class="pr-5">
                    <button [disabled]="!validarForm()" (click)="crear()" mat-raised-button color="primary">Acceder</button>
                </mat-card-actions>
            </form>
        </mat-card>
    </div>
</div>